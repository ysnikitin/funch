<div ng-show="!vm.ready">
    <span us-spinner="$root.spinner"></span>
</div>
<div class="rt-lunch" ng-show="vm.ready">
    <div class="row">
        <div class="col-xs-6">
            <div class="pagetitle">May I Take Your Order?</div>
        </div>
        <div class="col-xs-6">
            <div class="duty">This lunch is brought to you by: <strong>{{vm.onduty}}</strong></div>
        </div>
    </div>

    <div class="lunch">
        <div class="row">
            <div class="col-xs-3">
                <div class="countdown" ng-class="{'warning': vm.timeWarning}">
                    <span class="set">
                        <span class="primary">{{vm.countdown.h}}</span><span class="secondary">h</span>
                    </span>
                    <span class="set">
                        <span class="primary">{{vm.countdown.m}}</span><span class="secondary">m</span>
                    </span>
                    <span class="set">
                        <span class="primary">{{vm.countdown.s}}</span><span class="secondary">s</span>
                    </span>
                </div>
                <div class="countdown-left">
                    left to order
                </div>

                <div class="toolbar">
                    <a class="toolbar-item" target="_blank" href="{{vm.restaurant.menu}}">
                        <span>Menu</span><i class="fa fa-fw fa-file" style="color: #eaea7c" aria-hidden="true"></i>
                    </a>
                    <a class="toolbar-item" ng-click="vm.openFavorites()">
                        <span>Favs</span><i class="fa fa-fw fa-heart" aria-hidden="true" style="color: #d86f6f"></i>
                    </a>
                    <a class="toolbar-item" ng-click="vm.print()">
                        <span>Print</span><i class="fa fa-fw fa-print" aria-hidden="true" style="color: #91e891"></i>
                    </a>
                    <a class="toolbar-item" ng-click="vm.moreTime()">
                        <span>MORE TIME</span><i class="fa fa-fw fa-clock-o" aria-hidden="true"></i>
                    </a>
                    <a class="toolbar-item" ng-click="vm.openInviteGuests()">
                        <span>INVITE GUESTS</span><i class="fa fa-fw fa-user" aria-hidden="true"></i>
                    </a>
                    <a class="toolbar-item" ng-click="vm.cancelLunch()">
                        <span>CANCEL LUNCH</span><i class="fa fa-fw fa-times" aria-hidden="true" style="color: #d86f6f"></i>
                    </a>
                </div>
            </div>
            <div class="col-xs-1"></div>
            <div class="col-xs-8">
                <div class="restaurant">
                    <div class="name">{{vm.restaurant.name}}</div>
                    <div class="details">
                        <div class="row">
                            <div class="col-xs-12">
                                {{vm.restaurant.address}} &bull; {{vm.restaurant.phone}}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="myorder">
                    <form>
                        <div class="form-group">
                            <label>MY ORDER <span class="text-muted">(ordering as <strong>{{vm.user.initials}}</strong>)</span></label>
                            <div class="row">
                                <div class="col-xs-12">
                                    <input type="text" class="form-control" ng-model="vm.myorder.order" placeholder="Order" ng-disabled="vm.locked" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 text-right">
                                    <div class="myorder-save" ng-click="vm.saveMyOrder()" ng-if="!vm.locked">
                                        <span ng-show="!vm.processingOrder">Save</span>
                                        <span ng-show="vm.processingOrder">...</span>
                                    </div>
                                    <div class="myorder-expired" ng-if="vm.locked">
                                        This lunch is locked.  Time has expired!
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="allorders">
                    <label class="noprint">ALL ORDERS <span class="text-muted">({{vm.orders.length}} order(s) placed)</span></label>
                    <table class="table table-striped">
                        <tr ng-repeat="order in vm.orders">
                            <td class="col-xs-2 text-center">
                                <strong>{{vm.userMap[order.userId].initials}}</strong>
                            </td>
                            <td class="col-xs-10">
                                <span ng-show="order.order">
                                    {{order.order}}
                                </span>
                            </td>
                        </tr>
                        <tr ng-if="vm.orders.length === 0">
                            <td>Nobody has placed any orders!</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
